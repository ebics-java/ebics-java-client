(self["webpackChunkebics_client_qs"]=self["webpackChunkebics_client_qs"]||[]).push([[902],{1169:(e,l,s)=>{"use strict";s.d(l,{e7:()=>t,Cx:()=>a,UL:()=>i,_3:()=>n});class t{constructor(e="",l="",s="",t="",i=new a){this.serviceName=e,this.serviceOption=l,this.scope=s,this.containerType=t,this.message=i}label(){return`${this.serviceName}|${this.serviceOption}|${this.scope}|${this.containerType}|${this.message.label()}`}}class a{constructor(e="",l="",s="",t=""){this.messageName=e,this.messageNameFormat=t,this.messageNameVariant=l,this.messageNameVersion=s}label(){return`${this.messageName}.${this.messageNameVariant}.${this.messageNameVersion}.${this.messageNameFormat}`}}var i,n;(function(e){e["INI"]="INI",e["HIA"]="HIA",e["HPB"]="HPB",e["SPR"]="SPR"})(i||(i={})),function(e){e[e["CreateUserKeys"]=1]="CreateUserKeys",e[e["UploadUserKeys"]=2]="UploadUserKeys",e[e["PrintUserLetters"]=3]="PrintUserLetters",e[e["DownloadBankKeys"]=4]="DownloadBankKeys",e[e["VerifyBankKeys"]=5]="VerifyBankKeys",e[e["Finish"]=6]="Finish",e[e["Unknown"]=7]="Unknown"}(n||(n={}))},8902:(e,l,s)=>{"use strict";s.r(l),s.d(l,{default:()=>w});var t=s(3673);const a={class:"q-pa-md"},i=(0,t.Wm)("h5",null,"Upload File",-1),n={class:"q-pa-md",style:{"max-width":"400px"}};function o(e,l,s,o,r,u){const d=(0,t.up)("q-select"),m=(0,t.up)("q-toggle"),p=(0,t.up)("q-icon"),c=(0,t.up)("q-file"),g=(0,t.up)("q-input"),y=(0,t.up)("q-btn"),h=(0,t.up)("q-form"),b=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(b,{class:"justify-evenly"},{default:(0,t.w5)((()=>[(0,t.Wm)("div",a,[i,(0,t.Wm)("div",n,[(0,t.Wm)(h,{onSubmit:e.onSubmit,onReset:e.onCancel,class:"q-gutter-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(d,{filled:"",modelValue:e.user,"onUpdate:modelValue":l[1]||(l[1]=l=>e.user=l),options:e.users,"option-label":e.userLabel,label:"EBICS User",hint:"Select EBICS User","lazy-rules":"",rules:[e=>0!=e.id||"Please select valid EBICS User"]},null,8,["modelValue","options","option-label","rules"]),"H005"!=e.user.ebicsVersion?((0,t.wg)(),(0,t.j4)(d,{key:0,filled:"",modelValue:e.orderType,"onUpdate:modelValue":l[2]||(l[2]=l=>e.orderType=l),options:e.orderTypes,label:"EBICS Order Type",hint:"Select EBICS Order Type","lazy-rules":"",rules:[e=>0!=e.id||"Please select valid EBICS Order Type"]},null,8,["modelValue","options","rules"])):(0,t.ry)("",!0),"H005"==e.user.ebicsVersion?((0,t.wg)(),(0,t.j4)(d,{key:1,filled:"",modelValue:e.btfType,"onUpdate:modelValue":l[3]||(l[3]=l=>e.btfType=l),options:e.btfTypes,"option-label":l=>e.btfLabel(l),label:"BTF Message Type",hint:"Select EBICS BTF Message Type","lazy-rules":"",rules:[e=>0!=e.id||"Please select valid EBICS BTF Message Type"]},null,8,["modelValue","options","option-label","rules"])):(0,t.ry)("",!0),"H005"!=e.user.ebicsVersion?((0,t.wg)(),(0,t.j4)(m,{key:2,modelValue:e.signatureOZHNN,"onUpdate:modelValue":l[4]||(l[4]=l=>e.signatureOZHNN=l),label:e.signatureOZHNN?"Signature (OZHNN)":"No Signature (DZHNN)"},null,8,["modelValue","label"])):(0,t.ry)("",!0),"H005"==e.user.ebicsVersion?((0,t.wg)(),(0,t.j4)(m,{key:3,modelValue:e.signatureFlag,"onUpdate:modelValue":l[5]||(l[5]=l=>e.signatureFlag=l),label:"Signature flag"},null,8,["modelValue"])):(0,t.ry)("",!0),"H005"==e.user.ebicsVersion&&e.signatureFlag?((0,t.wg)(),(0,t.j4)(m,{key:4,modelValue:e.requestEDS,"onUpdate:modelValue":l[6]||(l[6]=l=>e.requestEDS=l),label:"Request EDS"},null,8,["modelValue"])):(0,t.ry)("",!0),(0,t.Wm)(c,{style:{"max-width":"300px"},modelValue:e.file,"onUpdate:modelValue":[l[7]||(l[7]=l=>e.file=l),e.onUpdateInputFile],outlined:"",label:"Max file size (20k)","max-file-size":"20480",onRejected:e.onRejected},{prepend:(0,t.w5)((()=>[(0,t.Wm)(p,{name:"attach_file"})])),_:1},8,["modelValue","onRejected","onUpdate:modelValue"]),e.file&&!e.binary?((0,t.wg)(),(0,t.j4)(g,{key:5,modelValue:e.fileText,"onUpdate:modelValue":l[8]||(l[8]=l=>e.fileText=l),filled:"",type:"textarea",label:"Input file content"},null,8,["modelValue"])):(0,t.ry)("",!0),(0,t.Wm)("div",null,[(0,t.Wm)(y,{label:"Upload",type:"submit",color:"primary"})])])),_:1},8,["onSubmit","onReset"])])])])),_:1})}var r=s(1768),u=s(1169),d=s(1959);const m=(0,t.aZ)({name:"FileUpload",components:{},props:{},data(){return{file:(0,d.iH)(null),fileText:"text of the file",binary:!1,users:[],user:{userId:"",name:""},orderType:"",orderTypes:["XE2","XE3","XL3","XG1","CCT"],btfType:void 0,btfTypes:[new u.e7("GLB","","CH","zip",new u.Cx("camt.054","001","03","XML")),new u.e7("BTC","","CH","xml",new u.Cx("pain.001","001","09","XML")),new u.e7("BTC","URG","DE","xml",new u.Cx("pain.001","001","09","XML"))],signatureFlag:!0,requestEDS:!0,signatureOZHNN:!0}},methods:{btfLabel(e){return e instanceof u.e7?e.label():""},onUpdateInputFile(e){console.log(e.name),e.text().then((e=>{!0===/\ufffd/.test(e)?(this.binary=!0,this.$q.notify({color:"positive",position:"bottom-right",message:"Binary files can't be edited, although you can still upload the file",icon:"warning"})):(this.binary=!1,this.fileText=e)})).catch((e=>{this.$q.notify({color:"negative",position:"bottom-right",message:`Loading file failed: ${e.message}`,icon:"report_problem"})}))},userLabel(e){return null!==e&&e.userId.trim().length>0&&e.name.trim().length>0?`${e.userId} | ${e.name}`:""},loadUsersData(){r.api.get("/users").then((e=>{this.users=e.data})).catch((e=>{this.$q.notify({color:"negative",position:"bottom-right",message:`Loading failed: ${e.message}`,icon:"report_problem"})}))},onSubmit(){console.log(this.file)},onCancel(){this.$router.go(-1)},onRejected(){this.$q.notify({type:"negative",message:"File must smaller than 20kB, for bigger files use upload without editor"})}},mounted(){this.loadUsersData()}});var p=s(4379),c=s(5269),g=s(9098),y=s(8886),h=s(4974),b=s(4554),f=s(4689),V=s(8240),U=s(7518),T=s.n(U);m.render=o;const w=m;T()(m,"components",{QPage:p.Z,QForm:c.Z,QSelect:g.Z,QToggle:y.Z,QFile:h.Z,QIcon:b.Z,QInput:f.Z,QBtn:V.Z})}}]);