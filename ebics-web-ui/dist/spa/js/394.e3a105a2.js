(self["webpackChunkebics_client_qs"]=self["webpackChunkebics_client_qs"]||[]).push([[394],{5394:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>I});var o=l(3673),r=l(2323);const a={class:"q-pa-md"},i=(0,o.Wm)("h5",null,"Users",-1),n={class:"q-gutter-sm"},s={class:"q-pa-md q-gutter-sm"},d={class:"q-ml-sm"};function u(e,t,l,u,c,p){const m=(0,o.up)("q-th"),f=(0,o.up)("q-tr"),g=(0,o.up)("q-td"),h=(0,o.up)("q-btn"),w=(0,o.up)("q-icon"),b=(0,o.up)("q-input"),v=(0,o.up)("q-table"),q=(0,o.up)("q-avatar"),y=(0,o.up)("q-card-section"),U=(0,o.up)("q-card-actions"),W=(0,o.up)("q-card"),k=(0,o.up)("q-dialog"),D=(0,o.up)("q-page"),_=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(D,{class:"justify-evenly"},{default:(0,o.w5)((()=>[(0,o.Wm)("div",a,[i,(0,o.Wm)(v,{title:"Users",filter:e.filter,rows:e.users,columns:e.columns,"row-key":"id",selection:"single"},{header:(0,o.w5)((e=>[(0,o.Wm)(f,{props:e},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(e.cols,(t=>((0,o.wg)(),(0,o.j4)(m,{key:t.name,props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(t.label),1)])),_:2},1032,["props"])))),128)),(0,o.Wm)(m,{"auto-width":""})])),_:2},1032,["props"])])),body:(0,o.w5)((t=>[(0,o.Wm)(f,{props:t},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(t.cols,(e=>((0,o.wg)(),(0,o.j4)(g,{key:e.name,props:t},{default:(0,o.w5)((()=>[(0,o.Uk)((0,r.zw)(e.value),1)])),_:2},1032,["props"])))),128)),(0,o.Wm)(g,{style:{width:"220px"}},{default:(0,o.w5)((()=>[(0,o.Wm)("div",n,[(0,o.Wm)(h,{size:"sm",color:"primary",label:"Edit","icon-right":"edit","no-caps":"",onClick:l=>e.routeToUserPage(Number(t.key))},null,8,["onClick"]),(0,o.Wm)(h,{size:"sm",label:"Delete",color:"accent","icon-right":"delete",onClick:l=>{e.deleteUserDialog.show=!0,e.deleteUserDialog.id=Number(t.key),e.deleteUserDialog.name=t.cols[0].value}},null,8,["onClick"])])])),_:2},1024)])),_:2},1032,["props"])])),"top-left":(0,o.w5)((()=>[(0,o.Wm)(b,{borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":t[1]||(t[1]=t=>e.filter=t),placeholder:"Search"},{append:(0,o.w5)((()=>[(0,o.Wm)(w,{name:"search"})])),_:1},8,["modelValue"])])),"top-right":(0,o.w5)((()=>[(0,o.Wm)("div",s,[(0,o.Wm)(h,{color:"primary",label:"Add User","icon-right":"add","no-caps":"",onClick:t[2]||(t[2]=t=>e.routeToUserPage())}),(0,o.Wm)(h,{color:"primary","icon-right":"archive",label:"Export to csv","no-caps":"",onClick:e.exportTable},null,8,["onClick"])])])),_:1},8,["filter","rows","columns"]),(0,o.Wm)(k,{modelValue:e.deleteUserDialog.show,"onUpdate:modelValue":t[4]||(t[4]=t=>e.deleteUserDialog.show=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[(0,o.Wm)(y,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{icon:"delete",color:"primary","text-color":"white"}),(0,o.Wm)("span",d," Do you want to delete selected user: "+(0,r.zw)(e.deleteUserDialog.name)+". ",1)])),_:1}),(0,o.Wm)(U,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(h,{flat:"",label:"Cancel",color:"primary"},null,512),[[_]]),(0,o.wy)((0,o.Wm)(h,{flat:"",label:"Delete",color:"primary",onClick:t[3]||(t[3]=t=>e.deleteUser(this.deleteUserDialog.id))},null,512),[[_]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1})}var c=l(1768),p=function(e,t,l,o){function r(e){return e instanceof l?e:new l((function(t){t(e)}))}return new(l||(l=Promise))((function(l,a){function i(e){try{s(o.next(e))}catch(t){a(t)}}function n(e){try{s(o["throw"](e))}catch(t){a(t)}}function s(e){e.done?l(e.value):r(e.value).then(i,n)}s((o=o.apply(e,t||[])).next())}))};const m=(0,o.aZ)({name:"Users",components:{},data(){return{confirmDelete:!1,deleteUserDialog:{show:!1},filter:"",users:[{id:1,name:"TestUser1"}]}},methods:{loadData(){c.api.get("/users").then((e=>{this.users=e.data})).catch((e=>{this.$q.notify({color:"negative",position:"bottom-right",message:`Loading failed: ${e.message}`,icon:"report_problem"})}))},deleteUser(e){c.api.delete(`/users/${e}`).then((()=>{this.$q.notify({color:"positive",position:"bottom-right",message:"Delete user done",icon:"report_info"}),this.loadData()})).catch((e=>{this.$q.notify({color:"negative",position:"bottom-right",message:`Delete failed: ${e.message}`,icon:"report_info"})}))},routeToUserPage(e){return p(this,void 0,void 0,(function*(){const t=void 0===e?void 0:{id:e},l=void 0===e?"user/create":"user/edit";yield this.$router.push({name:l,params:t})}))},exportTable(){this.$q.notify({color:"positive",position:"bottom-right",message:"Exporting table data",icon:"report_info"})}},mounted(){this.loadData()},setup(){const e=[{name:"name",required:!0,label:"User name",align:"left",field:e=>e.name,sortable:!0},{name:"ebicsUserId",required:!0,label:"EBICS User ID",align:"left",field:e=>e.userId,sortable:!0},{name:"ebicsPartnerId",required:!0,label:"EBICS Partner ID",align:"left",field:e=>{var t,l;return null!==(l=null===(t=null===e||void 0===e?void 0:e.partner)||void 0===t?void 0:t.partnerId)&&void 0!==l?l:""},sortable:!0},{name:"ebicsBankName",required:!0,label:"Bank Name",align:"left",field:e=>{var t,l,o;return null!==(o=null===(l=null===(t=null===e||void 0===e?void 0:e.partner)||void 0===t?void 0:t.bank)||void 0===l?void 0:l.name)&&void 0!==o?o:""},sortable:!0},{name:"hostId",required:!0,label:"User DN",align:"left",field:e=>e.dn,sortable:!0}];return{columns:e}}});var f=l(4379),g=l(4993),h=l(8186),w=l(2414),b=l(3884),v=l(8240),q=l(4689),y=l(4554),U=l(6778),W=l(151),k=l(5589),D=l(5096),_=l(9367),C=l(677),Z=l(7518),Q=l.n(Z);m.render=u;const I=m;Q()(m,"components",{QPage:f.Z,QTable:g.Z,QTr:h.Z,QTh:w.Z,QTd:b.Z,QBtn:v.Z,QInput:q.Z,QIcon:y.Z,QDialog:U.Z,QCard:W.Z,QCardSection:k.Z,QAvatar:D.Z,QCardActions:_.Z}),Q()(m,"directives",{ClosePopup:C.Z})}}]);