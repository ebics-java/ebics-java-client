(self["webpackChunkebics_client_qs"]=self["webpackChunkebics_client_qs"]||[]).push([[845],{845:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>U});var a=o(3673),l=o(2323);const n={class:"q-pa-md"},i=(0,a.Wm)("h5",null,"Banks",-1),s={class:"q-gutter-sm"},r={class:"q-pa-md q-gutter-sm"},c={class:"q-ml-sm"};function d(e,t,o,d,u,p){const m=(0,a.up)("q-th"),h=(0,a.up)("q-tr"),k=(0,a.up)("q-td"),b=(0,a.up)("q-btn"),f=(0,a.up)("q-icon"),g=(0,a.up)("q-input"),w=(0,a.up)("q-table"),q=(0,a.up)("q-avatar"),y=(0,a.up)("q-card-section"),v=(0,a.up)("q-card-actions"),B=(0,a.up)("q-card"),W=(0,a.up)("q-dialog"),C=(0,a.up)("q-page"),D=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(C,{class:"justify-evenly"},{default:(0,a.w5)((()=>[(0,a.Wm)("div",n,[i,(0,a.Wm)(w,{title:"Banks",filter:e.filter,rows:e.banks,columns:e.columns,"row-key":"id",selection:"single"},{header:(0,a.w5)((e=>[(0,a.Wm)(h,{props:e},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(e.cols,(t=>((0,a.wg)(),(0,a.j4)(m,{key:t.name,props:e},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(t.label),1)])),_:2},1032,["props"])))),128)),(0,a.Wm)(m,{"auto-width":""})])),_:2},1032,["props"])])),body:(0,a.w5)((t=>[(0,a.Wm)(h,{props:t},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(t.cols,(e=>((0,a.wg)(),(0,a.j4)(k,{key:e.name,props:t},{default:(0,a.w5)((()=>[(0,a.Uk)((0,l.zw)(e.value),1)])),_:2},1032,["props"])))),128)),(0,a.Wm)(k,{style:{width:"220px"}},{default:(0,a.w5)((()=>[(0,a.Wm)("div",s,[(0,a.Wm)(b,{size:"sm",color:"primary",label:"Edit","icon-right":"edit","no-caps":"",onClick:o=>e.routeToBankPage(Number(t.key))},null,8,["onClick"]),(0,a.Wm)(b,{size:"sm",label:"Delete",color:"accent","icon-right":"delete",onClick:o=>{e.deleteBankDialog.show=!0,e.deleteBankDialog.id=Number(t.key),e.deleteBankDialog.name=t.cols[0].value}},null,8,["onClick"])])])),_:2},1024)])),_:2},1032,["props"])])),"top-left":(0,a.w5)((()=>[(0,a.Wm)(g,{borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":t[1]||(t[1]=t=>e.filter=t),placeholder:"Search"},{append:(0,a.w5)((()=>[(0,a.Wm)(f,{name:"search"})])),_:1},8,["modelValue"])])),"top-right":(0,a.w5)((()=>[(0,a.Wm)("div",r,[(0,a.Wm)(b,{color:"primary",label:"Add Bank","icon-right":"add","no-caps":"",onClick:t[2]||(t[2]=t=>e.routeToBankPage())}),(0,a.Wm)(b,{color:"primary","icon-right":"archive",label:"Export to csv","no-caps":"",onClick:e.exportTable},null,8,["onClick"])])])),_:1},8,["filter","rows","columns"]),(0,a.Wm)(W,{modelValue:e.deleteBankDialog.show,"onUpdate:modelValue":t[4]||(t[4]=t=>e.deleteBankDialog.show=t),persistent:""},{default:(0,a.w5)((()=>[(0,a.Wm)(B,null,{default:(0,a.w5)((()=>[(0,a.Wm)(y,{class:"row items-center"},{default:(0,a.w5)((()=>[(0,a.Wm)(q,{icon:"delete",color:"primary","text-color":"white"}),(0,a.Wm)("span",c," Do you want to delete selected bank: "+(0,l.zw)(e.deleteBankDialog.name)+". ",1)])),_:1}),(0,a.Wm)(v,{align:"right"},{default:(0,a.w5)((()=>[(0,a.wy)((0,a.Wm)(b,{flat:"",label:"Cancel",color:"primary"},null,512),[[D]]),(0,a.wy)((0,a.Wm)(b,{flat:"",label:"Delete",color:"primary",onClick:t[3]||(t[3]=t=>e.deleteBank(this.deleteBankDialog.id))},null,512),[[D]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1})}var u=o(1768),p=function(e,t,o,a){function l(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,n){function i(e){try{r(a.next(e))}catch(t){n(t)}}function s(e){try{r(a["throw"](e))}catch(t){n(t)}}function r(e){e.done?o(e.value):l(e.value).then(i,s)}r((a=a.apply(e,t||[])).next())}))};const m=(0,a.aZ)({name:"Banks",components:{},data(){return{confirmDelete:!1,deleteBankDialog:{show:!1},filter:"",banks:[{id:1,bankURL:"http://ubs.com/ebics",name:"UBC CH PROD",hostId:"EXUBSCH"},{id:2,bankURL:"http://zkb.ch/ebics",name:"ZKB PROD",hostId:"EXZKBCH"}]}},methods:{loadData(){u.api.get("/banks").then((e=>{this.banks=e.data})).catch((e=>{this.$q.notify({color:"negative",position:"bottom-right",message:`Loading failed: ${e.message}`,icon:"report_problem"})}))},deleteBank(e){u.api.delete(`/banks/${e}`).then((()=>{this.$q.notify({color:"positive",position:"bottom-right",message:"Delete bank done",icon:"report_info"}),this.loadData()})).catch((e=>{this.$q.notify({color:"negative",position:"bottom-right",message:`Delete failed: ${e.message}`,icon:"report_info"})}))},routeToBankPage(e){return p(this,void 0,void 0,(function*(){const t=void 0===e?void 0:{id:e},o=void 0===e?"bank/create":"bank/edit",a=void 0===e?"create":"edit";yield this.$router.push({name:o,params:t,query:{action:a}})}))},exportTable(){this.$q.notify({color:"positive",position:"bottom-right",message:"Exporting table data",icon:"report_info"})}},mounted(){this.loadData()},setup(){const e=[{name:"name",required:!0,label:"Bank name",align:"left",field:e=>e.name,sortable:!0},{name:"url",required:!0,label:"URL",align:"left",field:e=>e.bankURL,sortable:!0},{name:"hostId",required:!0,label:"EBICS Host Id",align:"left",field:e=>e.hostId,sortable:!0}];return{columns:e}}});var h=o(4379),k=o(4993),b=o(8186),f=o(2414),g=o(3884),w=o(8240),q=o(4689),y=o(4554),v=o(6778),B=o(151),W=o(5589),C=o(5096),D=o(9367),_=o(677),Z=o(7518),Q=o.n(Z);m.render=d;const U=m;Q()(m,"components",{QPage:h.Z,QTable:k.Z,QTr:b.Z,QTh:f.Z,QTd:g.Z,QBtn:w.Z,QInput:q.Z,QIcon:y.Z,QDialog:v.Z,QCard:B.Z,QCardSection:W.Z,QAvatar:C.Z,QCardActions:D.Z}),Q()(m,"directives",{ClosePopup:_.Z})}}]);